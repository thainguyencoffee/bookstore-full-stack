<div class="utils-container">
  <mat-form-field>
    <mat-label>Filter</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
  </mat-form-field>
</div>

<div class="mat-elevation-z2">
  <mat-paginator #paginator
                 [length]="dataSource.data.length"
                 [pageIndex]="0"
                 [pageSize]="10"
                 [pageSizeOptions]="[5, 10, 20]"
                 aria-label="Select page">
  </mat-paginator>

  <table mat-table class="full-width-table" [dataSource]="dataSource" matSort>
    <!--ID column-->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Order ID</th>
      <td mat-cell *matCellDef="let row" style="font-weight: bold">{{row.id}}
        @if(!copiedContent) {
          <button (click)="onCopyIsbn($event)" [cdkCopyToClipboard]="row.id" mat-icon-button [matTooltip]="'Copy UUID'"><mat-icon>content_copy</mat-icon></button>
        }
        @if(copiedContent) {
          <span><mat-icon>check</mat-icon> Copied content!</span>
        }
      </td>
    </ng-container>

    <!--totalPrice column-->
    <ng-container matColumnDef="totalPrice">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Total price</th>
      <td mat-cell *matCellDef="let row">
        {{row.totalPrice | currency:'VND':'symbol':'1.0-0'}}
      </td>
    </ng-container>

    <!--payment method column-->
    <ng-container matColumnDef="paymentMethod">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Payment method</th>
      <td mat-cell *matCellDef="let row">
        {{row.paymentMethod}}
      </td>
    </ng-container>

    <!--title column-->
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>Book title</th>
      <td mat-cell *matCellDef="let row">
        {{row.lineItems[0].bookDetail.title}} ...
      </td>
    </ng-container>

    <!-- Photo Column -->
    <ng-container matColumnDef="photo">
      <th mat-header-cell *matHeaderCellDef>Photo</th>
      <td mat-cell *matCellDef="let row">
        <img class="photo" mat-card-avatar style="background-size: cover" width="100px" [src]="row.lineItems[0].bookDetail.photos[0]" alt="">
      </td>
    </ng-container>

    <!--Status column-->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
      <td mat-cell *matCellDef="let row">
        @if(row.status === 'ACCEPTED') {
          <span style="color: green">{{row.status}}</span>
        }
        @if(row.status === 'REJECTED') {
          <span style="color: red">{{row.status}}</span>
        }
        @if(row.status === 'WAITING_FOR_ACCEPTANCE' || row.status === 'WAITING_FOR_PAYMENT') {
          <span style="color: orange">{{row.status}}</span>
        }
      </td>
    </ng-container>

    <!--placed date column-->
    <ng-container matColumnDef="createdDate">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Created date</th>
      <td mat-cell *matCellDef="let row">
        {{row.createdDate | date:'dd/MM/yyyy HH:mm:ss'}}
      </td>
    </ng-container>

    <!--phone number column-->
    <ng-container matColumnDef="phoneNumber">
      <th mat-header-cell *matHeaderCellDef>Phone number</th>
      <td mat-cell *matCellDef="let row">
        {{row.userInformation.phoneNumber}}
      </td>
    </ng-container>

    <!--Email column-->
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>Email contact</th>
      <td mat-cell *matCellDef="let row">
        {{row.userInformation.email}}
      </td>
    </ng-container>

    <!--Email column-->
    <ng-container matColumnDef="detail">
      <th mat-header-cell *matHeaderCellDef>View detail</th>
      <td mat-cell *matCellDef="let row">
        <a [routerLink]="['/order-detail', row.id]">
          <mat-icon>link</mat-icon>
        </a>
      </td>
    </ng-container>

    <!--Header-->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <!--Row-->
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns;"
    ></tr>
    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
    </tr>

  </table>

</div>
